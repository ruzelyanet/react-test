(this["webpackJsonpreact-test"]=this["webpackJsonpreact-test"]||[]).push([[0],{103:function(e,t,c){},104:function(e,t,c){"use strict";c.r(t);var n=c(1),r=c(19),a=c.n(r),s=(c(72),c(73),c(36)),i=c(9),o=c(8),l=c(113),j=c(112),d=c(107),u=c(22),b=c.n(u),h=c(24),O=c(63),f=c.n(O).a.create({baseURL:"http://test-front-spa.mmtestprojectsfactory.com/api/",headers:{"Content-Type":"application/json"}});function x(){return(x=Object(h.a)(b.a.mark((function e(t){var c,n;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f.post("/",t);case 2:return c=e.sent,n=c.data,e.abrupt("return",n);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var p=function(e){return x.apply(this,arguments)},m=c(2),v=function(){var e=Object(n.useState)(""),t=Object(o.a)(e,2),c=t[0],r=t[1],a=Object(n.useState)(""),s=Object(o.a)(a,2),u=s[0],b=s[1],h=Object(n.useState)({login:[],password:[]}),O=Object(o.a)(h,2),f=O[0],x=O[1],v=Object(n.useState)(""),g=Object(o.a)(v,2),y=g[0],N=g[1],w=Object(i.g)();return Object(m.jsx)("div",{className:"b-login",children:Object(m.jsxs)(l.a,{className:"card-primary",children:[Object(m.jsx)(l.a.Header,{children:"\u0412\u0445\u043e\u0434 \u0432 \u043b\u0438\u0447\u043d\u044b\u0439 \u043a\u0430\u0431\u0438\u043d\u0435\u0442"}),Object(m.jsx)(l.a.Body,{children:Object(m.jsxs)("div",{className:"login-form",children:[Object(m.jsxs)(j.a,{children:[Object(m.jsxs)("div",{className:"mb-50",children:[Object(m.jsxs)(j.a.Group,{className:"form-group pb-3",children:[Object(m.jsx)(j.a.Label,{children:"\u041b\u043e\u0433\u0438\u043d"}),Object(m.jsx)(j.a.Control,{value:c,onChange:function(e){r(e.target.value)},placeholder:"user@mail.ru",type:"text",className:f.login[0]&&"is-invalid"}),Object(m.jsx)("div",{className:"form-input-error text-danger text-end",children:f.login[0]})]}),Object(m.jsxs)(j.a.Group,{className:"form-group pb-3",children:[Object(m.jsx)(j.a.Label,{children:"\u041f\u0430\u0440\u043e\u043b\u044c"}),Object(m.jsx)(j.a.Control,{value:u,onChange:function(e){b(e.target.value)},placeholder:"*******",type:"password",className:f.password[0]&&"is-invalid"}),Object(m.jsx)("div",{className:"form-input-error text-danger text-end",children:f.password[0]})]})]}),Object(m.jsx)("div",{className:"text-center",children:Object(m.jsx)(d.a,{onClick:function(e){N(""),x({login:[],password:[]});var t=function(){var e={login:[],password:[]};return c||e.login.push("\u041e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u044c\u043d\u043e\u0435 \u043f\u043e\u043b\u0435"),c.match(/^[^\s@]+@[^\s@]+\.[^\s@]+$/)||e.login.push("\u041d\u0435 \u0432\u0430\u043b\u0438\u0434\u043d\u044b\u0439 Email"),u||e.password.push("\u041e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u044c\u043d\u043e\u0435 \u043f\u043e\u043b\u0435"),u.length<6&&e.password.push("\u041d\u0435 \u043c\u0435\u043d\u044c\u0448\u0435 7 \u0441\u0438\u043c\u0432\u043e\u043b\u043e\u0432"),/^(?=.*\d)(?=.*[a-zA-Z])[a-zA-Z_0-9]{7,}$/.test(u)||e.password.push("\u041d\u0435 \u0432\u0430\u043b\u0438\u0434\u043d\u044b\u0439 \u043f\u0430\u0440\u043e\u043b\u044c"),!e.password.length&&!e.login.length||(x(e),!1)}();t&&p({action:"login",login:c,password:u}).then((function(e){e.error?N(e.error):"ok"===e.result&&(localStorage.setItem("login",e.result),w.replace("/home"))}))},variant:"primary",className:"btn-block",children:"Submit \u2192"})})]}),y&&Object(m.jsx)("div",{className:"login-form-error text-danger form-input-error text-center",children:y})]})})]})})},g=function(){return Object(m.jsx)(v,{})},y=c(111),N=c(114),w=c(3),k=c(44),S=c(108),C=c(109),H=c(31),L=function(){return Object(H.b)()},q=H.c,D=c(28),E=Object(D.b)({name:"quote",initialState:{quotes:[],isLoading:!1,error:""},reducers:{fetchQuotes:function(e){e.isLoading=!0},fetchQuotesSuccess:function(e,t){e.isLoading=!1,e.error="",e.quotes=t.payload},fetchQuotesError:function(e,t){e.isLoading=!1,e.error=t.payload},updateQuotes:function(e,t){e.quotes=t.payload}}}),P=E.reducer,Q=function(){return function(){var e=Object(h.a)(b.a.mark((function e(t){var c,n;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t(E.actions.fetchQuotes()),e.next=4,f.post("/",{action:"quote"});case 4:c=e.sent,n=c.data.assets.map((function(e){return e.flag=!1,e})),t(E.actions.fetchQuotesSuccess(n)),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),t(E.actions.fetchQuotesError(e.t0.message));case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t){return e.apply(this,arguments)}}()},M=c(49),Y=["\u0412\u0430\u043b\u044e\u0442\u043d\u0430\u044f \u043f\u0430\u0440\u0430","\u041a\u043e\u0442\u0438\u0440\u043e\u0432\u043a\u0430","\u0414\u0430\u0442\u0430 \u043f\u043e\u043b\u0443\u0447\u0435\u043d\u0438\u044f"],R=function(e){var t=e.flag,c=e.handleClick;return Object(m.jsx)("div",{className:"checkStar",onClick:c,children:t?Object(m.jsx)(M.a,{}):Object(m.jsx)(M.b,{})})},T=function(){var e=q((function(e){return e.quoteReducer})),t=e.quotes,c=e.isLoading,r=e.error,a=L();Object(n.useEffect)((function(){a(Q())}),[]);return Object(m.jsxs)("div",{className:"table-exchange h-400 overflow-y-auto",children:[Object(m.jsxs)(S.a,{bordered:!0,hover:!0,size:"sm",className:"thead-sticky",children:[Object(m.jsx)("thead",{children:Object(m.jsxs)("tr",{children:[Object(m.jsx)("th",{children:Object(m.jsx)("div",{className:"w-16",children:c?Object(m.jsx)(C.a,{animation:"border",size:"sm"}):""})}),Y.map((function(e,t){return Object(m.jsx)("th",{children:e},t)}))]})}),Object(m.jsx)("tbody",{children:t.map((function(e,c){return Object(m.jsxs)("tr",{children:[Object(m.jsx)("td",{children:Object(m.jsx)(R,{flag:e.flag,handleClick:function(e){return function(e){var c=Object(k.a)(t),n=Object(w.a)({},c[e]);c.splice(e,1);var r=c.filter((function(e){return e.flag})),s=c.filter((function(e){return!e.flag}));n.flag=!n.flag,n.flag?r.unshift(n):s.unshift(n);var i=[].concat(Object(k.a)(r),Object(k.a)(s));a(E.actions.updateQuotes(i))}(c)}})}),Object(m.jsx)("td",{children:e.asset}),Object(m.jsx)("td",{children:e.quote}),Object(m.jsx)("td",{children:e.startDate})]},c)}))})]}),Object(m.jsx)("div",{children:r})]})},z=function(){var e=Object(n.useState)(""),t=Object(o.a)(e,2),c=t[0],r=t[1],a=Object(n.useState)(""),s=Object(o.a)(a,2),i=s[0],l=s[1],u=Object(n.useState)(""),b=Object(o.a)(u,2),h=b[0],O=b[1],f=Object(n.useState)({}),x=Object(o.a)(f,2),p=x[0],v=x[1],g=Object(n.useState)(),y=Object(o.a)(g,2),N=y[0],w=y[1],k=L(),S=q((function(e){return e.quoteReducer})),C=S.quotes,H=S.isLoading;S.error;Object(n.useEffect)((function(){k(Q())}),[]);var D={};C.forEach((function(e,t){var c=e.asset.split("/"),n=Object(o.a)(c,2),r=n[0],a=n[1];D[r]||(D[r]={}),D[r][a]=e.quote}));return Object(m.jsxs)("div",{className:"tab-card",children:[Object(m.jsx)("div",{className:"tab-card-header",children:"\u041a\u043e\u043d\u0432\u0435\u0440\u0442\u0430\u0446\u0438\u044f \u0432\u0430\u043b\u044e\u0442"}),Object(m.jsx)("div",{className:"tab-card-body",children:Object(m.jsx)("div",{className:"container-fluid",children:Object(m.jsxs)("div",{className:"converter",children:[Object(m.jsx)("div",{className:"converter-form",children:Object(m.jsx)("div",{className:"row justify-content-center",children:Object(m.jsx)("div",{className:"col-lg-7",children:Object(m.jsxs)("div",{className:"d-md-flex align-items-end",children:[Object(m.jsxs)("div",{className:"converter-form-control",children:[Object(m.jsx)("label",{children:"\u0421\u0443\u043c\u043c\u0430"}),Object(m.jsx)(j.a.Control,{value:c,className:"form-control-primary",disabled:H,onKeyPress:function(e){/[0-9]/.test(e.key)||e.preventDefault()},onChange:function(e){return function(e){r(e.currentTarget.value)}(e)}})]}),Object(m.jsxs)("div",{className:"d-flex mx-md-3 my-3 my-md-0",children:[Object(m.jsx)("div",{className:"converter-form-control",children:Object(m.jsx)(j.a.Select,{className:"form-control-primary",disabled:H,value:i,onChange:function(e){return function(e){l(e.currentTarget.value),O(Object.keys(D[e.currentTarget.value])[0]),v(D[e.currentTarget.value])}(e)},children:Object.keys(D).map((function(e,t){return Object(m.jsx)("option",{value:e,children:e},t)}))})}),Object(m.jsx)("div",{className:"converter-form-control ms-2",children:Object(m.jsx)(j.a.Select,{value:h,className:"form-control-primary",disabled:H,onChange:function(e){return function(e){O(e.currentTarget.value)}(e)},children:Object.keys(p).map((function(e,t){return Object(m.jsx)("option",{value:e,children:e},t)}))})})]}),Object(m.jsx)("div",{children:Object(m.jsx)(d.a,{variant:"primary",disabled:!h.length||!c||!i,onClick:function(){w(+c*+D[i][h])},children:"\u0420\u0430\u0441\u0441\u0447\u0438\u0442\u0430\u0442\u044c"})})]})})})}),Object(m.jsx)("div",{className:"converter-separator"}),Object(m.jsx)("div",{className:"converter-res",children:N?Object(m.jsx)("div",{className:"row justify-content-center",children:Object(m.jsxs)("div",{className:"col-lg-7",children:[Object(m.jsx)("label",{children:"\u0418\u0442\u043e\u0433\u043e"}),Object(m.jsx)("div",{className:"converter-res-num",children:N})]})}):""})]})})})]})},K=Object(D.b)({name:"history",initialState:{historyPart:[],history:[],isLoading:!1,error:""},reducers:{fetchHistory:function(e){e.isLoading=!0},fetchHistorySuccess:function(e,t){e.isLoading=!1,e.error="",e.history=t.payload},fetchHistoryError:function(e,t){e.isLoading=!1,e.error=t.payload},updateHistory:function(e,t){e.history=t.payload},updateHistoryPart:function(e,t){e.historyPart=[];for(var c=[],n=(1===t.payload||"".concat(t.payload-1,"0"),"".concat(t.payload,"0"),t.payload);n<=+"".concat(t.payload,"0");n++)c.push(e.history[n]);e.historyPart=c}}}),A=K.reducer,I=c(50),B=c.n(I),G=c(51),J=function(e){var t=Object(n.useState)(1),c=Object(o.a)(t,2),r=c[0],a=c[1],s=function(){return e.total/e.perPage-1};return Object(m.jsxs)("div",{className:"pagination justify-content-center align-items-center",children:[Object(m.jsx)("button",{className:"pagination-btn pagination-btn-prev",onClick:function(t){return function(){if(r>1){var t=r-1;a(t),e.change(t)}}()},disabled:1==r,children:Object(m.jsx)(G.a,{})}),Object(m.jsxs)("div",{className:"pagination-pages d-flex alig-items-center",children:[Object(m.jsx)("div",{className:"pagination-active-page",children:r}),Object(m.jsx)("div",{className:"pagination-pages-separator",children:"/"}),Object(m.jsx)("div",{className:"pagination-pages-total",children:s()})]}),Object(m.jsx)("button",{className:"pagination-btn pagination-btn-next",onClick:function(t){return function(){if(r<s()){var t=r+1;a(t),e.change(t)}}()},disabled:r==s(),children:Object(m.jsx)(G.b,{})})]})},Z=["\u0410\u043a\u0442\u0438\u0432","\u041d\u0430\u0447\u0430\u043b\u043e","\u041a\u043e\u0442\u0438\u0440\u043e\u0432\u043a\u0430","\u041a\u043e\u043d\u0435\u0446","\u041a\u043e\u0442\u0438\u0440\u043e\u0432\u043a\u0430","\u041f\u0440\u0438\u0431\u044b\u043b\u044c"],$=function(){var e=q((function(e){return e.historyReducer})),t=e.history,c=e.historyPart,r=(e.isLoading,e.error,L());Object(n.useEffect)((function(){r(function(){var e=Object(h.a)(b.a.mark((function e(t){var c,n;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t(K.actions.fetchHistory()),e.next=4,f.post("/",{action:"history"});case 4:c=e.sent,(n=c.data.deals).sort((function(e,t){var c=+new Date(e.finishDate),n=+new Date(t.finishDate);return c>n?-1:c<n?1:0})),t(K.actions.fetchHistorySuccess(n)),t(K.actions.updateHistoryPart(1)),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),t(K.actions.fetchHistoryError(e.t0.message));case 14:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(t){return e.apply(this,arguments)}}())}),[]);return Object(m.jsxs)("div",{className:"h-400 history-table",children:[Object(m.jsxs)(S.a,{bordered:!0,hover:!0,size:"sm",className:"thead-sticky",children:[Object(m.jsx)("thead",{children:Object(m.jsx)("tr",{children:Z.map((function(e,t){return Object(m.jsx)("th",{children:e},t)}))})}),Object(m.jsx)("tbody",{children:c.map((function(e,t){return Object(m.jsxs)("tr",{children:[Object(m.jsx)("td",{children:e.asset}),Object(m.jsx)("td",{children:e.startQuote}),Object(m.jsx)("td",{children:Object(m.jsx)(B.a,{format:"HH:MM YYYY.MM.DD",children:e.startDate})}),Object(m.jsx)("td",{children:e.finishQuote}),Object(m.jsx)("td",{children:Object(m.jsx)(B.a,{format:"HH:MM YYYY.MM.DD",children:e.finishDate})}),Object(m.jsx)("td",{className:"text-end",children:(c=e.profit,+c>0?"+".concat(c):c)})]},t);var c}))})]}),Object(m.jsx)(J,{total:t.length,perPage:10,change:function(e){return function(e){r(K.actions.updateHistoryPart(e))}(e)}})]})},U=function(){return Object(m.jsx)("div",{className:"b-dashboard",children:Object(m.jsxs)(y.a,{defaultActiveKey:"exchange",children:[Object(m.jsx)(N.a,{eventKey:"exchange",title:"\u041a\u0443\u0440\u0441\u044b \u0432\u0430\u043b\u044e\u0442",children:Object(m.jsx)(T,{})}),Object(m.jsx)(N.a,{eventKey:"converter ",title:"\u041a\u043e\u043d\u0432\u0435\u0440\u0442\u043e\u0440",children:Object(m.jsx)(z,{})}),Object(m.jsx)(N.a,{eventKey:"history",title:"\u0418\u0441\u0442\u043e\u0440\u0438\u044f",children:Object(m.jsx)($,{})})]})})},_=function(){var e=Object(i.g)();return Object(m.jsx)("div",{className:"dashboard-layaut d-lg-flex justify-content-lg-center",children:Object(m.jsxs)("div",{children:[Object(m.jsx)("div",{className:"text-end p-4",children:Object(m.jsx)(d.a,{variant:"secondary",onClick:function(){localStorage.removeItem("login"),e.replace("/login")},children:"\u0412\u044b\u0439\u0442\u0438"})}),Object(m.jsx)(U,{})]})})},F=c(110),V=c(20),W=Object(V.b)({quoteReducer:P,historyReducer:A}),X=c(32),ee=function(){return!!localStorage.getItem("login")},te=function(e,t,c){e.meta.auth?(ee()&&c(),c.redirect("/login")):("/login"===e.location.pathname&&ee()&&c.redirect("/home"),c())},ce=Object(D.a)({reducer:W});var ne=function(){return Object(m.jsx)(H.a,{store:ce,children:Object(m.jsx)(s.a,{children:Object(m.jsx)(X.a,{guards:[te],children:Object(m.jsx)("div",{className:"App",children:Object(m.jsx)(F.a,{children:Object(m.jsxs)(i.d,{children:[Object(m.jsx)(X.b,{path:"/login",exact:!0,component:g}),Object(m.jsx)(X.b,{path:"/",exact:!0,component:_,meta:{auth:!0}}),Object(m.jsx)(X.b,{path:"/home",exact:!0,component:_,meta:{auth:!0}})]})})})})})})};c(102),c(103);a.a.render(Object(m.jsx)(ne,{}),document.getElementById("root"))},73:function(e,t,c){}},[[104,1,2]]]);
//# sourceMappingURL=main.cd29cbda.chunk.js.map